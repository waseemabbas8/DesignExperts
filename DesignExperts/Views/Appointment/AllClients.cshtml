
@{
    ViewData["Title"] = "AllClients";
}
@model IEnumerable<Client>;


<header class="content__title">

    <h1>Manage Clients</h1>

    <div class="actions">
        <button id="btn-add-client" class="btn btn-dark btn--icon-text"><i class="zmdi zmdi-account-add"></i> New Client</button>

        <a href="" class="actions__item zmdi zmdi-check-all"></a>

        <div class="dropdown actions__item">
            <i data-toggle="dropdown" class="zmdi zmdi-more-vert"></i>
            <div class="dropdown-menu dropdown-menu-right">
                <a href="" class="dropdown-item">Refresh</a>
                <a href="" class="dropdown-item">Manage Widgets</a>
                <a href="" class="dropdown-item">Settings</a>
            </div>
        </div>
    </div>

    <style>
        .popup-content {
            display: none;
            min-width: 800px;
        }
    </style>
</header>

<!--Data Table to show/search saved clients-->
<div class="card">
    <div class="card-body">
        <h4 class="card-title">Search Clients</h4>
        <div class="table-responsive">
            <table id="data-table" class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>CNIC</th>
                        <th>Appointment</th>
                        <th>Project</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (Client client in Model)
                    {
                        <tr>
                            <td>@client.Id</td>
                            <td>@client.Name</td>
                            <td>@client.Cnic</td>
                            <td>Appointment</td>
                            <td>Project</td>
                            <td>Actions</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!--Pop Up to add new client-->
<div id="form-add-client" class="popup-content">
    <br />
    <div class="row">
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-account"></i></span>
            <div class="form-group">
                <input type="text" id="name" class="form-control" placeholder="Name">
                <i class="form-group__bar"></i>
            </div>
        </div>
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-card"></i></span>
            <div class="form-group">
                <input type="text" id="cnic" class="form-control input-mask" data-mask="00000-0000000-0" placeholder="e.g 00000-0000000-0" autocomplete="off" maxlength="13">
                <i class="form-group__bar"></i>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-smartphone"></i></span>
            <div class="form-group">
                <input type="text" id="mobile" class="form-control input-mask" data-mask="0000-0000000" placeholder="e.g 0300-0000000" autocomplete="off" maxlength="11">
                <i class="form-group__bar"></i>
            </div>
        </div>
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-phone"></i></span>
            <div class="form-group">
                <input type="text" id="phone" class="form-control input-mask" data-mask="000-0000000" placeholder="e.g 056-0000000" autocomplete="off" maxlength="10">
                <i class="form-group__bar"></i>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-email"></i></span>
            <div class="form-group">
                <input type="email" id="email" class="form-control" placeholder="e.g username@abc.com" maxlength="100">
                <i class="form-group__bar"></i>
            </div>
        </div>
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-my-location"></i></span>
            <div class="form-group">
                <input type="text" id="address" class="form-control" placeholder="e.g Block No.x, Street #x, City" maxlength="250">
                <i class="form-group__bar"></i>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="input-group col-md-6">
            <span class="input-group-addon"><i class="zmdi zmdi-male-female"></i></span>
            <div class="form-group">
                <input type="text" id="email" class="form-control" placeholder="e.g username@abc.com" maxlength="100">
                <i class="form-group__bar"></i>
            </div>
        </div>
    </div>
    <br />
    <button id="btn-save-client" class="btn btn-dark btn--icon-text" style="float:right"><i class="zmdi zmdi-save"></i> Save</button>
</div>

@section Scripts{
    <script>
        $(function () {

            $("#form-add-client").PopupWindow({
                title: "Add New Client",
                autoOpen: false
            });

            $("#btn-add-client").on("click", function (event) {
                $("#form-add-client").PopupWindow("open");
            });

            $("#btn-save-client").on("click", function (event) {
                var clientObj = {
                    Name: $("#name").val(),
                    Cnic: $("#cnic").val(),
                    Mobile: $("#mobile").val(),
                    Phone: $("#phone").val(),
                    Email: $("#email").val(),
                    Address: $("#address").val()
                };
                $.ajax({
                    type: "POST",
                    url: "/Appointment/AddClient",
                    data: clientObj,
                    dataType: "Json",
                    success: function (result) {
                        alert("Successfully added");
                    },
                    error: function (result) {
                        alert("Some Error occoured");
                    }
                });
            });
        });
    </script>
}